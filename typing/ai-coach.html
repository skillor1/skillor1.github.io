<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href="https://skillor.me/typing/ai-coach.html">
    <meta name="robots" content="index, follow">
    <meta name="description" content="Improve typing accuracy with AI-powered coach that analyzes your mistakes and generates personalized drills for weak keys. Optional voice feedback guides your typing rhythm for faster progress.">
    <meta name="keywords" content="AI typing coach online free, improve weak key typing, personalized typing drills, voice feedback typing practice, AI typing trainer 2025, typing error analysis tool">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://skillor.me/typing/ai-coach.html">
    <meta property="og:title" content="AI Typing Coach - Personalized Drills with Voice Feedback">
    <meta property="og:description" content="Improve typing accuracy with AI-powered coach that analyzes your mistakes and generates personalized drills for weak keys. Optional voice feedback guides your typing rhythm for faster progress.">
    <meta property="og:image" content="https://skillor.me/assets/img/og-cover.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Skillor">
    <meta property="og:locale" content="en_US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://skillor.me/typing/ai-coach.html">
    <meta name="twitter:title" content="AI Typing Coach - Personalized Drills with Voice Feedback">
    <meta name="twitter:description" content="Improve typing accuracy with AI-powered coach that analyzes your mistakes and generates personalized drills for weak keys. Optional voice feedback guides your typing rhythm for faster progress.">
    <meta name="twitter:image" content="https://skillor.me/assets/img/og-cover.png">
    <title>AI Typing Coach - Personalized Drills with Voice Feedback</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="../android-chrome-512x512.png">
    <link rel="manifest" href="../site.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/main.css">
    
    <style>
        :root {
            --tool-primary: #8b5cf6;
            --tool-secondary: #a78bfa;
            --tool-accent: #7c3aed;
        }
        
        .tool-container {
            min-height: 100vh;
            padding: 6rem 4% 3rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--tool-secondary);
            text-decoration: none;
            margin-bottom: 2rem;
            padding: 0.75rem 1.5rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 50px;
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateX(-5px);
        }
        
        .header-section {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .header-section h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            background: linear-gradient(135deg, #ffffff 0%, var(--tool-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .panel {
            background: rgba(30, 30, 45, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 20px;
            padding: 2rem;
        }
        
        .panel h3 {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }
        
        .weak-keys-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .key-card {
            aspect-ratio: 1;
            background: rgba(10, 10, 15, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .key-card:hover {
            transform: translateY(-5px);
            border-color: var(--tool-primary);
        }
        
        .key-card.weak {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }
        
        .key-char {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.25rem;
        }
        
        .key-accuracy {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .accuracy-bar {
            width: 60%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 0.25rem;
        }
        
        .accuracy-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981);
        }
        
        .stats-card {
            background: rgba(10, 10, 15, 0.6);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--tool-primary), var(--tool-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .practice-panel {
            grid-column: 1 / -1;
        }
        
        .mode-toggle {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .mode-btn {
            flex: 1;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mode-btn.active {
            background: linear-gradient(135deg, var(--tool-primary), var(--tool-accent));
            border-color: var(--tool-primary);
        }
        
        .voice-control {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .voice-toggle {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toggle-switch.active {
            background: var(--tool-primary);
        }
        
        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .toggle-switch.active .toggle-slider {
            left: 33px;
        }
        
        .text-display {
            background: rgba(10, 10, 15, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            line-height: 2;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 1.5rem;
        }
        
        .text-display .char {
            transition: color 0.1s;
        }
        
        .text-display .char.correct {
            color: #10b981;
        }
        
        .text-display .char.incorrect {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.2);
        }
        
        .text-display .char.current {
            border-bottom: 3px solid var(--tool-primary);
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { border-color: var(--tool-primary); }
            51%, 100% { border-color: transparent; }
        }
        
        .typing-input {
            width: 100%;
            background: rgba(10, 10, 15, 0.6);
            border: 2px solid var(--tool-primary);
            border-radius: 12px;
            padding: 1rem;
            color: white;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
        }
        
        .typing-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
        }
        
        .btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--tool-primary), var(--tool-accent));
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-size: 1rem;
            margin-top: 1rem;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.5);
        }
        
        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .progress-item {
            background: rgba(10, 10, 15, 0.6);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }
        
        .progress-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--tool-secondary);
        }
        
        .progress-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }
        
        .suggestion-box {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .suggestion-box h4 {
            color: #fbbf24;
            margin-bottom: 1rem;
        }
        
        .suggestion-list {
            list-style: none;
            padding: 0;
        }
        
        .suggestion-list li {
            color: rgba(255, 255, 255, 0.8);
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .suggestion-list li::before {
            content: 'üí°';
            position: absolute;
            left: 0;
        }
        
        @media (max-width: 968px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "AI Typing Coach - Personalized Training",
      "description": "AI-powered typing coach analyzes errors and creates custom drills for weak keys with optional voice feedback",
      "applicationCategory": "EducationalApplication"
    }
    </script>
</head>
<body>
    <div class="bg-animation">
        <div class="particles" id="particles"></div>
    </div>
    
    <nav class="navbar" id="navbar">
        <div class="logo" onclick="window.location.href='../index.html'">Skillor</div>
        <ul class="nav-links" id="navLinks">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../typing.html">Typing</a></li>
            <li><a href="../index.html#categories">Categories</a></li>
        </ul>
        <button class="nav-cta" onclick="window.location.href='../index.html'">Explore Tools</button>
        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
    
    <div class="tool-container">
        <a href="../typing.html" class="back-link">‚Üê Back to Typing Tools</a>
        
        <div class="header-section">
            <h1>ü§ñ AI Typing Coach</h1>
            <p>Personalized weak key drills ‚Ä¢ AI error analysis ‚Ä¢ Optional voice feedback</p>
        </div>
        
        <div class="dashboard-grid">
            <div class="panel">
                <h3>üéØ Your Weak Keys Analysis</h3>
                <p style="color: rgba(255,255,255,0.7); margin-bottom: 1.5rem;">
                    Keys highlighted in red need more practice. Click any key to start focused drill.
                </p>
                
                <div class="weak-keys-grid" id="keys-grid"></div>
            </div>
            
            <div class="panel">
                <h3>üìä Performance Stats</h3>
                
                <div class="stats-card">
                    <div class="stat-row">
                        <span class="stat-label">Overall Accuracy</span>
                        <span class="stat-value" id="overall-accuracy">95%</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Weak Keys</span>
                        <span class="stat-value" id="weak-count">5</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Practice Sessions</span>
                        <span class="stat-value" id="session-count">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Improvement</span>
                        <span class="stat-value" id="improvement">+12%</span>
                    </div>
                </div>
                
                <button class="btn" onclick="generateDrill()">üéØ Auto-Generate Drill</button>
            </div>
        </div>
        
        <div class="panel practice-panel">
            <h3>‚å®Ô∏è Practice Session</h3>
            
            <div class="mode-toggle">
                <button class="mode-btn active" onclick="switchMode('normal')">üìù Normal Mode</button>
                <button class="mode-btn" onclick="switchMode('drill')">üéØ Weak Key Drill</button>
                <button class="mode-btn" onclick="switchMode('combo')">üîó Key Combo Drill</button>
            </div>
            
            <div class="voice-control">
                <div class="voice-toggle">
                    <span style="color: white; font-weight: 600;">üîä Voice Pace Mode</span>
                    <div class="toggle-switch" onclick="toggleVoice()" id="voice-toggle">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">
                    Tool reads text, you type in rhythm
                </div>
            </div>
            
            <div class="text-display" id="practice-text">
                Click "Start Practice" to begin
            </div>
            
            <input type="text" class="typing-input" id="practice-input" placeholder="Start typing..." disabled>
            
            <div class="progress-stats">
                <div class="progress-item">
                    <div class="progress-value" id="live-wpm">0</div>
                    <div class="progress-label">WPM</div>
                </div>
                <div class="progress-item">
                    <div class="progress-value" id="live-accuracy">100%</div>
                    <div class="progress-label">Accuracy</div>
                </div>
                <div class="progress-item">
                    <div class="progress-value" id="live-errors">0</div>
                    <div class="progress-label">Errors</div>
                </div>
                <div class="progress-item">
                    <div class="progress-value" id="live-time">0:00</div>
                    <div class="progress-label">Time</div>
                </div>
            </div>
            
            <button class="btn" onclick="startPractice()">üöÄ Start Practice</button>
            
            <div class="suggestion-box" id="suggestions" style="display:none;">
                <h4>üí° AI Coaching Tips</h4>
                <ul class="suggestion-list" id="tips-list"></ul>
            </div>
        </div>
    </div>
    
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Skillor</h3>
                <p>Skillor is your ultimate destination for productivity tools and work efficiency. We believe in practical solutions, providing tools that make your daily tasks faster and more effective.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../about.html">About</a></li>
                    <li><a href="../contact.html">Contact US</a></li>
                    <li><a href="../privacy-policy.html">Privacy Policy</a></li>
                    <li><a href="../disclaimer.html">Disclaimer</a></li>
                    <li><a href="../terms-conditions.html">Terms and Conditions</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-icons">
                    <a href="https://www.youtube.com/@skillorai" class="social-icon" aria-label="YouTube" target="_blank" rel="noopener">‚ñ∂</a>
                    <a href="https://www.instagram.com/skillor_web/" class="social-icon" aria-label="Instagram" target="_blank" rel="noopener">üì∑</a>
                </div>
                <p class="footer-social-text">Stay updated with the latest tools and productivity resources.</p>
            </div>
        </div>
        <div class="footer-divider"></div>
        <div class="footer-bottom">
            <p>Copyright ¬© 2025 Skillor. All rights reserved.</p>
        </div>
    </footer>
    
    <script src="../assets/js/main.js"></script>
    <script>
        const keyboardKeys = 'qwertyuiopasdfghjklzxcvbnm'.split('');
        
        let keyStats = JSON.parse(localStorage.getItem('typingKeyStats') || JSON.stringify(
            keyboardKeys.reduce((acc, key) => ({...acc, [key]: {correct: 0, total: 0}}), {})
        ));
        
        let currentMode = 'normal';
        let voiceEnabled = false;
        let practiceActive = false;
        let practiceText = '';
        let startTime = 0;
        let errorCount = 0;
        
        const practiceTexts = {
            normal: [
                "The quick brown fox jumps over the lazy dog while racing through the forest.",
                "Practice typing every day to improve your speed and accuracy significantly.",
                "Technology advances rapidly and staying updated is essential for success."
            ],
            drill: {
                q: "queen quick quest require quartz quality question quarterly",
                z: "zero zone zigzag zealous zenith puzzle fuzzy amazing",
                x: "fox boxixeroxy toxic relax explore example",
                p: "port peak purple project prepare proposal prompt",
                j: "jump just major adjust journey project object"
            },
            combo: {
                th: "the theme theory through thought thick thin",
                ch: "chat check child change challenge choose",
                qu: "quick queen question quiet quote quality",
                er: "error never better winter power",
                ing: "typing racing making taking running"
            }
        };
        
        function generateKeyGrid() {
            const grid = document.getElementById('keys-grid');
            grid.innerHTML = '';
            
            keyboardKeys.forEach(key => {
                const stats = keyStats[key];
                const accuracy = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 100;
                const isWeak = accuracy < 85;
                
                const card = document.createElement('div');
                card.className = `key-card ${isWeak ? 'weak' : ''}`;
                card.onclick = () => startKeyDrill(key);
                
                card.innerHTML = `
                    <div class="key-char">${key.toUpperCase()}</div>
                    <div class="key-accuracy">${accuracy}%</div>
                    <div class="accuracy-bar">
                        <div class="accuracy-fill" style="width: ${accuracy}%"></div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            updateStats();
        }
        
        function updateStats() {
            let totalCorrect = 0;
            let totalAttempts = 0;
            let weakKeys = 0;
            
            Object.values(keyStats).forEach(stat => {
                totalCorrect += stat.correct;
                totalAttempts += stat.total;
                const accuracy = stat.total > 0 ? (stat.correct / stat.total) * 100 : 100;
                if (accuracy < 85) weakKeys++;
            });
            
            const overallAccuracy = totalAttempts > 0 ? Math.round((totalCorrect / totalAttempts) * 100) : 100;
            
            document.getElementById('overall-accuracy').textContent = overallAccuracy + '%';
            document.getElementById('weak-count').textContent = weakKeys;
        }
        
        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            document.getElementById('voice-toggle').classList.toggle('active');
            
            if (voiceEnabled) {
                alert('üîä Voice Pace Mode Enabled!\n\nThe tool will read the text for you to type in rhythm.');
            }
        }
        
        function generateDrill() {
            // Find top 5 weak keys
            const weakKeys = Object.entries(keyStats)
                .map(([key, stats]) => ({
                    key,
                    accuracy: stats.total > 0 ? (stats.correct / stats.total) * 100 : 100
                }))
                .filter(k => k.accuracy < 90)
                .sort((a, b) => a.accuracy - b.accuracy)
                .slice(0, 5);
            
            if (weakKeys.length === 0) {
                alert('üéâ Great! No weak keys detected. Keep practicing to maintain your skills!');
                return;
            }
            
            const drillText = weakKeys.map(k => {
                return practiceTexts.drill[k.key] || `${k.key} ${k.key}${k.key} ${k.key}${k.key}${k.key}`;
            }).join(' ');
            
            currentMode = 'drill';
            document.querySelectorAll('.mode-btn')[1].classList.add('active');
            document.querySelectorAll('.mode-btn')[0].classList.remove('active');
            document.querySelectorAll('.mode-btn')[2].classList.remove('active');
            
            setupPractice(drillText);
        }
        
        function startKeyDrill(key) {
            const drillText = practiceTexts.drill[key] || `${key} ${key}${key} ${key}${key}${key} practice ${key}`;
            currentMode = 'drill';
            setupPractice(drillText);
        }
        
        function startPractice() {
            let text = '';
            
            if (currentMode === 'normal') {
                text = practiceTexts.normal[Math.floor(Math.random() * practiceTexts.normal.length)];
            } else if (currentMode === 'drill') {
                const weakKeys = Object.entries(keyStats)
                    .filter(([key, stats]) => stats.total > 0 && (stats.correct / stats.total) < 0.85)
                    .map(([key]) => key);
                
                if (weakKeys.length > 0) {
                    const targetKey = weakKeys[Math.floor(Math.random() * weakKeys.length)];
                    text = practiceTexts.drill[targetKey] || practiceTexts.normal[0];
                } else {
                    text = practiceTexts.normal[0];
                }
            } else if (currentMode === 'combo') {
                const combos = Object.keys(practiceTexts.combo);
                const targetCombo = combos[Math.floor(Math.random() * combos.length)];
                text = practiceTexts.combo[targetCombo];
            }
            
            setupPractice(text);
        }
        
        function setupPractice(text) {
            practiceText = text;
            practiceActive = true;
            startTime = Date.now();
            errorCount = 0;
            
            const display = document.getElementById('practice-text');
            display.innerHTML = '';
            
            practiceText.split('').forEach((char, i) => {
                const span = document.createElement('span');
                span.className = 'char';
                span.textContent = char;
                if (i === 0) span.classList.add('current');
                display.appendChild(span);
            });
            
            const input = document.getElementById('practice-input');
            input.disabled = false;
            input.value = '';
            input.focus();
            
            if (voiceEnabled) {
                speakText(practiceText);
            }
            
            updateTimer();
        }
        
        function speakText(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.7; // Slower pace
                utterance.pitch = 1;
                utterance.volume = 1;
                window.speechSynthesis.speak(utterance);
            }
        }
        
        function updateTimer() {
            if (!practiceActive) return;
            
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('live-time').textContent = `${minutes}:${String(seconds).padStart(2, '0')}`;
            
            setTimeout(updateTimer, 1000);
        }
        
        document.getElementById('practice-input').addEventListener('input', function(e) {
            if (!practiceActive) return;
            
            const input = e.target.value;
            const chars = document.querySelectorAll('#practice-text .char');
            
            let correct = 0;
            chars.forEach((char, i) => {
                char.classList.remove('correct', 'incorrect', 'current');
                
                if (i < input.length) {
                    const inputChar = input[i];
                    const targetChar = practiceText[i];
                    
                    if (inputChar === targetChar) {
                        char.classList.add('correct');
                        correct++;
                        
                        // Track key stats
                        if (!keyStats[targetChar.toLowerCase()]) {
                            keyStats[targetChar.toLowerCase()] = {correct: 0, total: 0};
                        }
                        keyStats[targetChar.toLowerCase()].correct++;
                        keyStats[targetChar.toLowerCase()].total++;
                    } else {
                        char.classList.add('incorrect');
                        errorCount++;
                        
                        if (!keyStats[targetChar.toLowerCase()]) {
                            keyStats[targetChar.toLowerCase()] = {correct: 0, total: 0};
                        }
                        keyStats[targetChar.toLowerCase()].total++;
                    }
                } else if (i === input.length) {
                    char.classList.add('current');
                }
            });
            
            const elapsed = (Date.now() - startTime) / 1000;
            const wpm = Math.round((correct / 5) / (elapsed / 60));
            const accuracy = input.length > 0 ? Math.round((correct / input.length) * 100) : 100;
            
            document.getElementById('live-wpm').textContent = isNaN(wpm) || !isFinite(wpm) ? 0 : wpm;
            document.getElementById('live-accuracy').textContent = accuracy + '%';
            document.getElementById('live-errors').textContent = errorCount;
            
            if (input.length >= practiceText.length) {
                endPractice();
            }
        });
        
        function endPractice() {
            practiceActive = false;
            document.getElementById('practice-input').disabled = true;
            
            localStorage.setItem('typingKeyStats', JSON.stringify(keyStats));
            generateKeyGrid();
            
            const sessions = parseInt(document.getElementById('session-count').textContent) + 1;
            document.getElementById('session-count').textContent = sessions;
            
            showSuggestions();
        }
        
        function showSuggestions() {
            const weakKeys = Object.entries(keyStats)
                .filter(([key, stats]) => stats.total > 0 && (stats.correct / stats.total) < 0.85)
                .map(([key]) => key)
                .slice(0, 3);
            
            if (weakKeys.length === 0) return;
            
            const tips = [
                `Focus on keys: ${weakKeys.map(k => k.toUpperCase()).join(', ')}`,
                'Practice weak keys 5 minutes daily for best results',
                'Use proper finger positioning for better accuracy',
                'Take short breaks every 15 minutes to avoid fatigue'
            ];
            
            const tipsList = document.getElementById('tips-list');
            tipsList.innerHTML = tips.map(tip => `<li>${tip}</li>`).join('');
            
            document.getElementById('suggestions').style.display = 'block';
        }
        
        generateKeyGrid();
    </script>
</body>
</html>
